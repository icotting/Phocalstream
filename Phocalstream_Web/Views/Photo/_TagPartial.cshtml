@model Phocalstream_Shared.Data.Model.Photo.Photo

<!-- Bootstrap Tags Input CSS and JS Files-->
<link href="~/Content/bootstrap-tags/css/bootstrap-tagsinput.css" rel="stylesheet">
<script src="~/Content/bootstrap-tags/js/bootstrap-tagsinput.min.js"></script>

<div style="clear: both;"></div>

<h2>Photo Tags</h2>

<div>
    <!-- Existing tags for the photo -->
    @if (Model.Tags != null)
    {
        <ul>
            @foreach (var tag in Model.Tags)
            {
                <li class="tag label label-primary">@tag.Name</li> 
            }
        </ul>
    }

    <!-- Field for new tags -->
    <div class="row" style="padding-left: 40px">
        @using (Ajax.BeginForm("AddTag", new AjaxOptions { UpdateTargetId = "tagPartial" }))
        {
            <form role="form">
                @Html.HiddenFor(model => model.ID)
                <div class="form-group">
                    <input id="tag-field" type="text" />
                </div>
                <button type="submit" class="btn btn-default">Submit</button>
            </form>
        }
    </div>
</div>

<div>
    <button id="tag-submit" class="btn btn-danger">Submit if you dare!</button>
</div>

<script>
    $('#tag-field').tagsinput({
    //    tagClass: 'big'
    });
</script>

<script>
    $(document).ready(function () {
        $('#tag-submit').click(function () {
            var tags = $("#tag-field").val();
            
            $.ajax({
                url: '@Url.Action("AddTag", "Photo")',
                type: 'POST',
                cache: false,
                data: {
                    photoID: 60,
                    tags: tags
                },
                success: function (data) {
                    $('#tagPartial').html(data);
                },
                error: function (err) {
                    alert(err.responseText);
                }
            });
        });
    });
</script>
